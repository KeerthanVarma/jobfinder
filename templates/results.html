{% extends "base.html" %}
{% block content %}

<div class="container my-5">
    <h2 class="fw-bold text-center mb-4 text-primary">
        <i class="bi bi-briefcase-fill me-2"></i> Job Results
    </h2>

    {% if jobs %}
        <div class="row g-4">
            {% for job in jobs %}
            <div class="col-md-6 col-lg-4">
                <div class="card job-card shadow-lg rounded-4 h-100 border-0">
                    <div class="card-body d-flex flex-column p-4">

                        <!-- Role -->
                        <h5 class="card-title fw-bold text-dark mb-2">
                            {% if search_role and search_role.lower() in job.role.lower() %}
                                <mark class="px-1 rounded">{{ job.role }}</mark>
                            {% else %}
                                {{ job.role }}
                            {% endif %}
                        </h5>

                        <!-- Company -->
                        <h6 class="card-subtitle mb-2 text-muted">
                            <i class="bi bi-building me-1"></i>
                            {% if search_company and search_company.lower() in job.company.lower() %}
                                <mark class="px-1 rounded">{{ job.company }}</mark>
                            {% else %}
                                {{ job.company }}
                            {% endif %}
                        </h6>

                        <!-- Location & Experience -->
                        <p class="mb-2 small text-muted">
                            <i class="bi bi-geo-alt me-1"></i>
                            {% if search_location and search_location.lower() in job.location.lower() %}
                                <mark class="px-1 rounded">{{ job.location }}</mark>
                            {% else %}
                                {{ job.location or "Location not specified" }}
                            {% endif %}
                            {% if job.experience %}
                                | <span class="badge bg-info text-dark">{{ job.experience }}</span>
                            {% endif %}
                        </p>

                        <!-- Description -->
                        <p class="card-text text-truncate small text-secondary mb-3" style="max-height: 70px;" title="{{ job.description }}">
                            {{ job.description or "No description available." }}
                        </p>

                        <!-- Skills -->
                        {% if job.skills %}
                        <div class="mb-3">
                            {% for skill in job.skills %}
                                <span class="badge bg-light text-dark border me-1 mb-1">{{ skill }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <!-- Bottom Row -->
                        <div class="mt-auto d-flex justify-content-between align-items-center pt-2 border-top">
                            <a href="{{ job.link }}" target="_blank" class="btn btn-gradient btn-sm px-3">
                                Apply <i class="bi bi-box-arrow-up-right ms-1"></i>
                            </a>
                            {% if job.source == "LinkedIn" %}
                                <span class="badge" style="background-color: #6f42c1; color: white;">{{ job.source }}</span>
                            {% elif job.source == "Naukri" %}
                                <span class="badge bg-success">{{ job.source }}</span>
                            {% elif job.source == "Unstop" %}
                                <span class="badge bg-danger">{{ job.source }}</span>
                            {% else %}
                                <span class="badge bg-warning text-dark">{{ job.source }}</span>
                            {% endif %}
                        </div>


                        <!-- Stipend -->
                        <p class="mt-2 mb-0 text-muted small">
                            <i class="bi bi-cash-coin me-1"></i> {{ job.stipend or "Not specified" }}
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center mt-5">
            <i class="bi bi-emoji-frown display-4 text-muted"></i>
            <p class="text-muted fs-5 mt-3">No jobs found matching your search criteria.</p>
        </div>
    {% endif %}
</div>

<!-- Extra Styling -->
<style>
    .job-card {
        transition: all 0.3s ease-in-out;
    }
    .job-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    .btn-gradient {
        background: linear-gradient(90deg, #007bff, #00c6ff);
        color: white;
        border: none;
        transition: background 0.3s ease-in-out;
    }
    .btn-gradient:hover {
        background: linear-gradient(90deg, #0056b3, #0099cc);
        color: white;
    }
</style>

{% endblock %}
